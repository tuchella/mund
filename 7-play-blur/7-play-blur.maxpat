max v2;#N vpatcher 10 50 1166 881;#P origin 0 -47;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 22 698 114 196617 jit.clip @min 0 @max 1;#P newex 22 679 114 196617 jit.dimmap @invert 0 1;#P newex 22 660 62 196617 jit.unpack 2;#P window linecount 2;#P comment 897 406 58 196617 blur width (in frames);#P flonum 861 411 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#P newex 836 433 35 196617 *~ 0.;#P objectname *2[1];#P window linecount 3;#P comment 878 343 44 196617 smooth with noise~!;#P window linecount 1;#P newex 836 363 33 196617 +~ 1.;#P newex 836 382 41 196617 *~ 0.5;#P objectname *2;#P newex 836 343 38 196617 noise~;#P user panel 832 339 88 64;#X brgb 255 255 255;#X frgb 214 0 0;#X border 2;#X rounded 12;#X shadow 0;#X done;#P window linecount 2;#P comment 50 599 197 196617 2. use attribute "out_name" to save memory and copy time;#P comment 50 571 197 196617 1. use [jit.expr] \, it can do any jitter object able to deal with float numbers;#P button 22 617 15 0;#P newex 22 513 181 196617 jit.expr @expr "gtp(in[0].p[0]\\\, 1.)" "in[0].p[1]" @out_name newspectrum;#P window linecount 1;#P comment 39 558 164 196617 Two new things here:;#P user jit.pwindow 21 722 122 82 1 1 0 0 1 0;#P window linecount 3;#P comment 32 471 97 196617 your processing of amplitude (here \, "denoiser");#P user panel 17 464 194 85;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P window linecount 1;#P message 22 439 103 196617 jit_matrix spectrum;#P newex 22 641 211 196617 jit.matrix newspectrum 2 float32 200 2048;#P newex 816 224 60 196617 loadmess 1;#P user ubumenu 744 370 53 196617 0 1 1 0;#X add (select);#X add play;#X add stop;#X prefix_set 0 0 <none> 0;#X pattrmode 1;#P newex 790 472 62 196617 selector~ 2;#P comment 19 127 100 196617 record;#P comment 724 703 259 196617 clicked position frame number;#P newex 901 276 40 196617 / 200.;#P comment 736 246 80 196617 playback rate:;#P newex 837 74 78 196617 loadmess 1024;#P flonum 816 246 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 854 250 27 196617 t b f;#P comment 753 162 101 196617 sound duration (ms):;#P window linecount 3;#P comment 897 95 113 196617 hop size (could be sent by a [fftinfo~] inside one of the [pfft~];#P window linecount 1;#P comment 706 104 107 196617 number of frames ->;#P flonum 837 95 60 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 800 117 47 196617 * 1024.;#P flonum 854 205 56 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 854 182 45 196617 !/ 1000.;#P flonum 854 161 49 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 800 136 64 196617 sampstoms~;#P comment 701 206 153 196617 frequency for normal playback:;#P newex 816 272 65 196617 * 0.215332;#P newex 816 321 47 196617 *~ 200.;#P newex 816 296 94 196617 phasor~ 0.215332;#P window linecount 8;#P comment 33 314 89 196617 duration of the sound: 200 frames * (2048/2 hop size in samples) * 1/44100 (sampling rate) = 4.644 sec = 4644 ms;#P window linecount 1;#P message 25 188 14 196617 0;#P button 4 127 15 0;#P newex 4 149 31 196617 t 1 b;#P newex 25 168 50 196617 del 4644;#P comment 714 481 89 196617 frame to play ->;#P newex 709 674 27 196617 - 1;#P user gain~ 790 515 24 100 158 0 1.071519 7.94321 10.;#P newex 629 693 92 196617 zmap 0 319 0 199;#B color 2;#P newex 790 654 30 196617 dac~;#P newex 842 452 43 196617 sig~ -1;#P newex 790 494 206 196617 pfft~ play-newspectrum-nosah.pfft 4096 4;#P newex 629 612 42 196617 zl rot 1;#P newex 629 631 41 196617 route 1;#P newex 629 593 49 196617 zl slice 3;#P newex 629 674 55 196617 clip 0 319;#B color 2;#P newex 629 650 55 196617 unpack 0 0;#P newex 629 574 63 196617 route mouse;#P newex 318 97 60 196617 loadmess 1;#P newex 150 21 72 196617 loadmess 200;#P message 230 97 68 196617 dim \$1 2048;#P newex 318 285 114 196617 jit.clip @min 0 @max 1;#P comment 319 546 100 196617 amplitudes;#P user jit.pwindow 343 199 66 50 0 1 0 0 1 0;#P comment 635 556 151 196617 ----get onclick position----;#P toggle 318 116 15 0;#P newex 318 133 63 196617 qmetro 100;#P window linecount 2;#P comment 185 40 89 196617 number of frames to record;#P user jit.pwindow 318 304 322 242 1 1 0 0 1 0;#P window linecount 1;#P newex 318 262 114 196617 jit.dimmap @invert 0 1;#P newex 318 181 62 196617 jit.unpack 2;#P user jit.fpsgui 257 304 60 196617 3;#P toggle 79 170 15 0;#P newex 318 162 193 196617 jit.matrix spectrum 2 float32 200 2048;#P number 150 40 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P toggle 25 219 15 0;#P newex 79 188 30 196617 adc~;#P newex 39 267 122 196617 pfft~ record.pfft 4096 4;#P comment 94 170 66 196617 audio on/off;#P comment 40 219 77 196617 record on/off;#P comment 2 108 136 196617 --------record--------;#P comment 344 249 100 196617 phase differences;#P user panel 2 125 73 20;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 77 168 85 19;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 728 365 84 29;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 9 421 240 214;#X brgb 251 255 191;#X frgb 232 179 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 729 244 124 22;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 859 404 98 28;#X brgb 139 255 59;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P connect 45 0 44 0;#P connect 72 0 77 0;#P connect 77 0 78 0;#P fasten 27 0 71 0 235 638 27 638;#P connect 78 0 71 0;#P connect 71 0 89 0;#P connect 89 0 90 0;#P connect 90 0 91 0;#P connect 91 0 75 0;#P connect 44 1 43 0;#P connect 43 0 46 0;#P fasten 46 0 12 0 30 206 30 206;#P fasten 44 0 12 0 9 207 30 207;#P connect 11 0 10 0;#P connect 12 0 10 0;#P connect 15 0 11 0;#P connect 28 0 13 0;#P connect 13 0 10 1;#P fasten 13 0 27 0 155 77 235 77;#P connect 18 0 16 0;#P connect 29 0 22 0;#P connect 22 0 21 0;#P fasten 27 0 14 0 235 155 323 155;#P connect 21 0 14 0;#P connect 14 0 17 0;#P connect 17 0 18 0;#P connect 18 0 26 0;#P connect 26 0 19 0;#P connect 17 1 24 0;#P connect 19 1 30 0;#P connect 30 0 33 0;#P connect 33 0 35 0;#P connect 35 0 34 0;#P connect 34 0 31 0;#P connect 31 0 32 0;#P connect 32 0 39 0;#P fasten 13 0 41 0 155 165 254 165 254 670 714 670;#P connect 41 0 39 4;#P fasten 69 0 68 0 749 397 795 397;#P connect 68 0 36 0;#P connect 36 0 40 0;#P connect 40 0 38 0;#P fasten 13 0 56 0 155 73 805 73;#P connect 56 0 52 0;#P connect 40 0 38 1;#P connect 70 0 62 0;#P connect 62 0 50 0;#P connect 61 0 50 0;#P connect 50 0 48 0;#P connect 48 0 49 0;#P connect 86 0 68 1;#P connect 49 0 68 1;#P connect 82 0 84 0;#P connect 84 0 83 0;#P connect 83 0 86 0;#P connect 63 0 57 0;#P connect 57 0 56 1;#P connect 37 0 68 2;#P fasten 13 0 49 1 155 65 957 65 957 318 858 318;#P connect 52 1 53 0;#P connect 53 0 54 0;#P connect 54 0 55 0;#P connect 55 0 61 0;#P connect 87 0 86 1;#P connect 61 1 50 1;#P connect 65 0 48 1;#P fasten 39 0 65 0 634 716 964 716 964 270 906 270;#P lcolor 2;#P fasten 13 0 65 1 155 69 949 69 949 257 936 257;#P pop;